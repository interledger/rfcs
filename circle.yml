machine:
  node:
    version: 6
  pre:
    - git config --global user.email "info@circleci.com"
    - git config --global user.name "CircleCI"
    - git config --global push.default simple
test:
  override:
    # Generate graphs for specs
    - node scripts/generate_graphs.js
    # Generate specs for website
    - node scripts/generate_web.js
    # Copy test reports
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - cp reports/*.xml $CIRCLE_TEST_REPORTS/junit/
deployment:
  production:
    branch: master
    commands:
      # Publish spec
      - node scripts/publish_web.js
general:
  artifacts:
    - "web"
